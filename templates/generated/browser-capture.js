// ============================================================================
// Browser Capture Template - Auto-generated from templates/source/browser-capture.json
// Generated: 2025-11-22T14:51:52Z
// DO NOT EDIT THIS FILE DIRECTLY - Edit the source JSON and rebuild
// ============================================================================

const BROWSER_CAPTURE_TEMPLATE = 
{
  "scriptTemplate": "// SEB Domain Capture Script - Run AFTER fully logging in and using the service\n(function() {\nconsole.clear();\nconsole.log('%cðŸ›¡ï¸ SEB Domain Capture', 'font-size:20px; color:#5e72e4; font-weight:bold;');\nconsole.log('%c' + '='.repeat(60), 'color:#ccc;');\n\n// Preset domains from current configuration\nconst presetDomains = ${PRESET_DOMAINS_JSON};\nconst presetSet = new Set(presetDomains.map(d => d.toLowerCase()));\n\nconst allDomains = new Set();\n\n// Capture all network requests\nperformance.getEntries().forEach(entry => {\n    try {\n        const url = new URL(entry.name);\n        if (url.hostname && !url.hostname.match(/^(localhost|127\\\\.0\\\\.0\\\\.1|::1)$/)) {\n            allDomains.add(url.hostname.toLowerCase());\n        }\n    } catch (e) {}\n});\n\n// Filter out domains already in preset\nconst newDomains = [...allDomains].filter(domain => {\n    // Check exact match\n    if (presetSet.has(domain)) return false;\n    \n    // Check if domain matches any preset wildcard\n    for (let preset of presetDomains) {\n        if (preset.startsWith('*.')) {\n            const suffix = preset.substring(1); // Remove *\n            if (domain.endsWith(suffix) || domain === suffix.substring(1)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}).sort();\n\nconsole.log(\\`\\nðŸ“Š Total captured: \\${allDomains.size} domains\\`);\nconsole.log(\\`âœ“ Already in preset: \\${allDomains.size - newDomains.length} domains\\`);\nconsole.log(\\`ðŸ†• New domains found: \\${newDomains.length} domains\\n\\`);\n\nif (newDomains.length === 0) {\n    console.log('%câœ… NO NEW DOMAINS NEEDED!', 'color:#2dce89; font-size:18px; font-weight:bold;');\n    console.log('%cAll captured domains are already in the preset.', 'color:#666;');\n    console.log('\\n' + '='.repeat(60) + '\\n');\n    return;\n}\n\n// Generate wildcards for new domains only\nconst wildcards = new Set();\nnewDomains.forEach(domain => {\n    const parts = domain.split('.');\n    if (parts.length > 2) {\n        wildcards.add('*.' + parts.slice(-2).join('.'));\n    } else {\n        wildcards.add(domain);\n    }\n});\n\nconst output = [...wildcards].sort().join('\\n');\n\nconsole.log('='.repeat(60));\nconsole.log('%cðŸ“‹ COPY THESE NEW DOMAINS:', 'color:#f5365c; font-size:16px; font-weight:bold;');\nconsole.log('='.repeat(60) + '\\n');\nconsole.log(output);\nconsole.log('\\n' + '='.repeat(60));\n\nconsole.log('\\n%cðŸ“ HOW TO USE:', 'color:#5e72e4; font-weight:bold;');\nconsole.log('  1. Select the domain list above (click & drag)');\nconsole.log('  2. Right-click â†’ Copy (or Ctrl+C / Cmd+C)');\nconsole.log('  3. Paste into \"Custom Domains\" field in SEB Generator');\nconsole.log('\\n' + '='.repeat(60) + '\\n');\n})();",
  "bookmarkletTemplate": "javascript:(function(){const domains=new Set();performance.getEntries().forEach(e=>{try{const u=new URL(e.name);if(u.hostname&&!u.hostname.match(/^(localhost|127\\\\.0\\\\.0\\\\.1|::1)$/)){domains.add(u.hostname)}}catch(err){}});const sorted=[...domains].sort();let output='SEB Domain Capture\\n'+'='.repeat(50)+'\\n\\n';output+='Total domains: '+sorted.length+'\\n\\n';output+='DOMAINS:\\n'+'-'.repeat(50)+'\\n';output+=sorted.join('\\n')+'\\n';output+='-'.repeat(50)+'\\n\\n';output+='Wildcards (recommended):\\n'+'-'.repeat(50)+'\\n';const wildcards=new Set();sorted.forEach(d=>{const parts=d.split('.');if(parts.length>2){wildcards.add('*.'+parts.slice(-2).join('.'))}else{wildcards.add(d)}});output+=[...wildcards].sort().join('\\n');const modal=document.createElement('div');modal.className='domain-capture-modal';const pre=document.createElement('pre');pre.className='domain-capture-output';pre.textContent=output;const btnContainer=document.createElement('div');btnContainer.className='domain-capture-buttons';const copyBtn=document.createElement('button');copyBtn.className='domain-capture-copy-btn';copyBtn.textContent='ðŸ“‹ Copy';copyBtn.addEventListener('click',()=>{navigator.clipboard.writeText(sorted.join('\\n')).then(()=>{copyBtn.textContent='âœ“ Copied!';setTimeout(()=>copyBtn.textContent='ðŸ“‹ Copy',2000)})});const closeBtn=document.createElement('button');closeBtn.className='domain-capture-close-btn';closeBtn.textContent='âœ•';closeBtn.addEventListener('click',()=>modal.remove());btnContainer.appendChild(copyBtn);btnContainer.appendChild(closeBtn);modal.appendChild(pre);modal.appendChild(btnContainer);document.body.appendChild(modal)})();"
}
;
